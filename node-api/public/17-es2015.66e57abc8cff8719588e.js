(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{oTcB:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o});var r=n("8Y7J"),a=function(){function e(e,t,n){this.el=e,this.vcr=t,this.renderer=n,this.dtOptions={}}return e.prototype.ngOnInit=function(){var e=this;this.dtTrigger?this.dtTrigger.subscribe(function(){e.displayTable()}):this.displayTable()},e.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},e.prototype.displayTable=function(){var e=this,t=this;this.dtInstance=new Promise(function(n,r){Promise.resolve(e.dtOptions).then(function(r){setTimeout(function(){var a={rowCallback:function(n,a,i){if(r.columns){var o=r.columns;o.filter(function(e){return e.ngPipeInstance&&!e.ngTemplateRef}).forEach(function(e){var t=e.ngPipeInstance,r=o.findIndex(function(t){return t.data==e.data}),a=n.childNodes.item(r),i=$(a).text(),l=t.transform(i);$(a).text(l)}),o.filter(function(e){return e.ngTemplateRef&&!e.ngPipeInstance}).forEach(function(e){var r=e.ngTemplateRef,i=r.ref,l=r.context,d=o.findIndex(function(t){return t.data==e.data}),s=n.childNodes.item(d),c=Object.assign({},l,null==l?void 0:l.userData,{adtData:a}),m=t.vcr.createEmbeddedView(i,c);t.renderer.appendChild(s,m.rootNodes[0])})}e.dtOptions.rowCallback&&e.dtOptions.rowCallback(n,a,i)}};a=Object.assign({},r,a),e.dt=$(e.el.nativeElement).DataTable(a),n(e.dt)})})})},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](r.ElementRef),r["\u0275\u0275directiveInject"](r.ViewContainerRef),r["\u0275\u0275directiveInject"](r.Renderer2))},e.\u0275dir=r["\u0275\u0275defineDirective"]({type:e,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),e}(),i=n("SVse"),o=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[i.CommonModule]]}),e}()},sGCc:function(e,t,n){"use strict";n.r(t),n.d(t,"CategoryModule",function(){return A});var r=n("SVse"),a=n("IheW"),i=n("iInd"),o=n("Jc0W"),l=n("XNiG");class d{constructor(){this.name="",this.image="",this.oldImage=""}}var s=n("Sf1D"),c=n("oTcB"),m=n("AytR"),g=n("8Y7J"),h=n("7g+E"),u=n("EApP"),p=n("s7LF"),y=n("ysJy"),f=n("IDld");const b=["showAddEditCategoryModal"],w=["deleteCategoryModal"],C=["imgFileInput"];function v(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"tr"),g["\u0275\u0275elementStart"](1,"th"),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"th"),g["\u0275\u0275element"](4,"img",39),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"th"),g["\u0275\u0275text"](6),g["\u0275\u0275pipe"](7,"titlecase"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](8,"th"),g["\u0275\u0275elementStart"](9,"div",40),g["\u0275\u0275elementStart"](10,"button",41),g["\u0275\u0275listener"]("click",function(){g["\u0275\u0275restoreView"](e);const n=t.$implicit;return g["\u0275\u0275nextContext"]().showAddEditModal(n)}),g["\u0275\u0275element"](11,"i",42),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"button",43),g["\u0275\u0275listener"]("click",function(){g["\u0275\u0275restoreView"](e);const n=t.$implicit;return g["\u0275\u0275nextContext"]().showshowActionModal(n)}),g["\u0275\u0275element"](13,"i",44),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](n+1),g["\u0275\u0275advance"](2),g["\u0275\u0275propertyInterpolate"]("src",e.image,g["\u0275\u0275sanitizeUrl"]),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](g["\u0275\u0275pipeBind1"](7,3,e.name))}}function E(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",45),g["\u0275\u0275element"](1,"img",46),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("src",e.selectedImage.imageUrl?e.selectedImage.imageUrl:e.newCategory.image,g["\u0275\u0275sanitizeUrl"])}}const S=function(){return{backdrop:"static",keyboard:!1,animated:!0}},x=function(e,t){return{"text-secondary":e,"text-primary":t}},I=function(){return{backdrop:"static",keyboard:!1}},M=[{path:"",component:(()=>{class e{constructor(e,t,n,r){this.spinner=e,this.categoryService=t,this.toastr=n,this.globalService=r,this.newCategory=new d,this.newCategoryAlready=!1,this.dtOptions={},this.dtTrigger=new l.a,this.categoryList=[],this.requiredValidation={name:""},this.selectedImage={imageInfo:[],imageUrl:""},this.GetCategoryList()}ngOnInit(){this.dtOptions={responsive:!0,columnDefs:[{targets:0,orderable:!0,searchable:!1},{targets:1,orderable:!1},{targets:2,orderable:!1}]}}ngAfterViewInit(){this.dtTrigger.next()}closeModel(){this.showAddEditCategoryModal.hide(),this.deleteCategoryModal.hide(),this.imgFileInputVar.nativeElement.value="",this.selectedImage={imageInfo:[],imageUrl:""}}uploadImg(e){const t=new FileReader;if(!e.target.files[0].name.match(/\.(jpg|jpeg|png)$/))return this.toastr.warning("You can upload only jpg, jpeg, png, gif image.","Warning"),this.imgFileInputVar.nativeElement.value="",this.newCategoryAlready=!1,!1;this.selectedImage.imageInfo=e.target.files[0],t.readAsDataURL(e.target.files[0]),t.onload=e=>{this.selectedImage.imageUrl=e.target.result}}saveImage(){const e=this;if(Object.keys(this.requiredValidation).filter(function(t){return!e.newCategory[t]}).length)return this.toastr.error("* Please fill all mandatory fields.","Error"),!1;if(!this.newCategory._id&&!this.selectedImage.imageInfo.name)return this.toastr.error("* Please select image.","Error"),!1;const t=Object.assign({},this.newCategory);t.name=t.name.trim(),this.selectedImage.imageInfo.name?(this.spinner.show(),this.globalService.localUpload(this.selectedImage.imageInfo,m.a.uploadFolder.category).subscribe(e=>{200===e.status&&(t.oldImage=t.image,t.image=e.imgPath,this.saveCategory(t))},e=>{this.closeModel(),this.spinner.hide(),this.toastr.error("There are some server error. Please check connection.","Error")})):this.saveCategory(t)}saveCategory(e){this.categoryService.saveCategory(e).subscribe(e=>{this.spinner.hide(),200===e.status&&(this.toastr.success("Category"+(this.newCategory._id?" Updated ":" Created ")+"Successfully","Success"),this.GetCategoryList(),this.closeModel())},e=>{this.closeModel(),this.spinner.hide(),this.toastr.error("There are some server error. Please check connection.","Error")})}checkAlreadyExitCategory(e){e&&this.categoryList.filter(function(t){return e._id&&t._id!==e._id&&t.name===e._name.trim()||!e._id&&t.name===e.name.trim()}).length?(this.newCategoryAlready=!1,this.toastr.error("This name already exist.","Error")):this.newCategoryAlready=!0}GetCategoryList(){this.spinner.show(),this.categoryService.getCategoryList().subscribe(e=>{200===e.status&&this.datatableElement.dtInstance.then(t=>{t.destroy(),this.dtTrigger.next(),this.categoryList=e.data,this.spinner.hide()})})}showAddEditModal(e){this.newCategoryAlready=!0,d?(this.newCategory=Object.assign({},e),this.showAddEditCategoryModal.show()):(this.newCategory=new d,this.showAddEditCategoryModal.show())}showshowActionModal(e){this.newCategory=e,this.deleteCategoryModal.show()}deleteCategory(){this.spinner.show(),this.categoryService.deleteCategory(this.newCategory).subscribe(e=>{this.spinner.hide(),this.closeModel(),this.GetCategoryList(),this.toastr.success("Category deleted successfully.","Success")},e=>{this.spinner.hide(),this.deleteCategoryModal.hide(),this.toastr.error("There are some server error. Please check connection.","Error")})}}return e.\u0275fac=function(t){return new(t||e)(g["\u0275\u0275directiveInject"](h.c),g["\u0275\u0275directiveInject"](s.d),g["\u0275\u0275directiveInject"](u.b),g["\u0275\u0275directiveInject"](s.e))},e.\u0275cmp=g["\u0275\u0275defineComponent"]({type:e,selectors:[["app-category"]],viewQuery:function(e,t){if(1&e&&(g["\u0275\u0275viewQuery"](b,1),g["\u0275\u0275viewQuery"](w,1),g["\u0275\u0275viewQuery"](c.a,1),g["\u0275\u0275viewQuery"](C,1)),2&e){let e;g["\u0275\u0275queryRefresh"](e=g["\u0275\u0275loadQuery"]())&&(t.showAddEditCategoryModal=e.first),g["\u0275\u0275queryRefresh"](e=g["\u0275\u0275loadQuery"]())&&(t.deleteCategoryModal=e.first),g["\u0275\u0275queryRefresh"](e=g["\u0275\u0275loadQuery"]())&&(t.datatableElement=e.first),g["\u0275\u0275queryRefresh"](e=g["\u0275\u0275loadQuery"]())&&(t.imgFileInputVar=e.first)}},decls:82,vars:21,consts:[[1,"card"],[1,"card-body"],[1,"row","justify-content-between"],[1,"col"],[1,"text-primary"],[1,"col","d-flex","justify-content-end"],["type","button",1,"btn","btn-primary",3,"click"],[1,"carc",2,"min-height","550px"],[1,"text-left","table-responsive","pr-5p","pl-5p"],["datatable","",1,"mt-20","table","table-bordered","table-hover","table-striped",3,"dtOptions","dtTrigger"],[1,"text-white","text-nowrap","bg-dark"],[1,"text-white","bg-dark",2,"width","50px"],[1,"text-white","bg-dark"],[4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade",3,"config"],["showAddEditCategoryModal","bs-modal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","text-white"],["type","button","aria-label","Close",1,"close","text-white",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row","row-xs","align-items-center","mg-b-20"],[1,"col-md-12","mb-4"],["class","mb-10",4,"ngIf"],["for","categoryImg",1,"font-weight-bold","mg-b-0"],["aria-hidden","true",1,"fa","fa-star","star-icon",3,"ngClass"],["type","file","accept","image/jpeg,image/jpg,image/png",1,"form-control",3,"change"],["imgFileInput",""],[1,"col-md-12","mg-t-5","mg-md-t-0"],[1,"font-weight-bold","mg-b-0"],["type","text","id","name","maxlength","40","name","name","placeholder","Please enter Category name","appRemoveWhitespace","",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],["deleteCategoryModal","bs-modal"],[1,"fa","fa-trash"],["type","button",1,"btn","btn-default",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["width","40px","height","40px",3,"src"],[1,"btn-group"],["type","button",1,"tn","btn-sm","btn-outline-primary","mr-1",3,"click"],[1,"fa","fa-pencil"],["type","button",1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"fa","fa-trash-o"],[1,"mb-10"],["width","100px","height","100px",1,"img-fluid",3,"src"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",0),g["\u0275\u0275elementStart"](1,"div",1),g["\u0275\u0275elementStart"](2,"div",2),g["\u0275\u0275elementStart"](3,"div",3),g["\u0275\u0275elementStart"](4,"h2",4),g["\u0275\u0275elementStart"](5,"b"),g["\u0275\u0275text"](6,"Categories"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"div",5),g["\u0275\u0275elementStart"](8,"button",6),g["\u0275\u0275listener"]("click",function(){return t.showAddEditModal()}),g["\u0275\u0275text"](9,"Add Category"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](10,"div",0),g["\u0275\u0275elementStart"](11,"div",1),g["\u0275\u0275elementStart"](12,"div",7),g["\u0275\u0275elementStart"](13,"div",8),g["\u0275\u0275element"](14,"hr"),g["\u0275\u0275elementStart"](15,"table",9),g["\u0275\u0275elementStart"](16,"thead"),g["\u0275\u0275elementStart"](17,"tr",10),g["\u0275\u0275elementStart"](18,"th",11),g["\u0275\u0275text"](19,"S.No."),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](20,"th",12),g["\u0275\u0275text"](21,"Image"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](22,"th",12),g["\u0275\u0275text"](23,"Name"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](24,"th",12),g["\u0275\u0275text"](25,"Action"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](26,"tbody"),g["\u0275\u0275template"](27,v,14,5,"tr",13),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](28,"div",14,15),g["\u0275\u0275elementStart"](30,"div",16),g["\u0275\u0275elementStart"](31,"div",17),g["\u0275\u0275elementStart"](32,"div",18),g["\u0275\u0275elementStart"](33,"h4",19),g["\u0275\u0275text"](34),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](35,"button",20),g["\u0275\u0275listener"]("click",function(){return t.closeModel()}),g["\u0275\u0275elementStart"](36,"span",21),g["\u0275\u0275text"](37,"\xd7"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](38,"div",22),g["\u0275\u0275elementStart"](39,"div",23),g["\u0275\u0275elementStart"](40,"div",24),g["\u0275\u0275template"](41,E,2,1,"div",25),g["\u0275\u0275elementStart"](42,"label",26),g["\u0275\u0275text"](43," Category Image "),g["\u0275\u0275elementStart"](44,"sup"),g["\u0275\u0275element"](45,"i",27),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](46,"input",28,29),g["\u0275\u0275listener"]("change",function(e){return t.uploadImg(e)}),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](48,"div",30),g["\u0275\u0275elementStart"](49,"label",31),g["\u0275\u0275text"](50," Category Name "),g["\u0275\u0275elementStart"](51,"sup"),g["\u0275\u0275element"](52,"i",27),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](53,"input",32),g["\u0275\u0275listener"]("ngModelChange",function(e){return t.newCategory.name=e})("ngModelChange",function(){return t.checkAlreadyExitCategory(t.newCategory)}),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](54,"div",33),g["\u0275\u0275element"](55,"app-alert"),g["\u0275\u0275elementStart"](56,"button",34),g["\u0275\u0275listener"]("click",function(){return t.saveImage()}),g["\u0275\u0275text"](57),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](58,"div",14,35),g["\u0275\u0275elementStart"](60,"div",16),g["\u0275\u0275elementStart"](61,"div",17),g["\u0275\u0275elementStart"](62,"div",18),g["\u0275\u0275elementStart"](63,"h4",19),g["\u0275\u0275element"](64,"i",36),g["\u0275\u0275text"](65," Delete Category"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](66,"button",20),g["\u0275\u0275listener"]("click",function(){return t.closeModel()}),g["\u0275\u0275elementStart"](67,"span",21),g["\u0275\u0275text"](68,"\xd7"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](69,"div",22),g["\u0275\u0275elementStart"](70,"h4"),g["\u0275\u0275text"](71,"Are you sure want to delete this Category?"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](72,"p"),g["\u0275\u0275elementStart"](73,"b"),g["\u0275\u0275text"](74,"Category Name:"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275text"](75),g["\u0275\u0275element"](76,"br"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](77,"div",33),g["\u0275\u0275elementStart"](78,"button",37),g["\u0275\u0275listener"]("click",function(){return t.closeModel()}),g["\u0275\u0275text"](79,"Close"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](80,"button",38),g["\u0275\u0275listener"]("click",function(){return t.deleteCategory()}),g["\u0275\u0275text"](81,"Delete"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](15),g["\u0275\u0275property"]("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),g["\u0275\u0275advance"](12),g["\u0275\u0275property"]("ngForOf",t.categoryList),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("config",g["\u0275\u0275pureFunction0"](13,S)),g["\u0275\u0275advance"](6),g["\u0275\u0275textInterpolate1"]("",t.newCategory._id?"Edit":"Add"," Category"),g["\u0275\u0275advance"](7),g["\u0275\u0275property"]("ngIf",t.selectedImage.imageUrl||t.newCategory._id),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngClass",g["\u0275\u0275pureFunction2"](14,x,!(null!=t.newCategory&&t.newCategory.image),null==t.newCategory?null:t.newCategory.image)),g["\u0275\u0275advance"](7),g["\u0275\u0275property"]("ngClass",g["\u0275\u0275pureFunction2"](17,x,!(null!=t.newCategory&&t.newCategory.name),null==t.newCategory?null:t.newCategory.name)),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngModel",t.newCategory.name),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("disabled",!t.newCategoryAlready),g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate"](t.newCategory._id?"Update":"Save"),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("config",g["\u0275\u0275pureFunction0"](20,I)),g["\u0275\u0275advance"](17),g["\u0275\u0275textInterpolate1"](" ",null==t.newCategory?null:t.newCategory.name,""))},directives:[c.a,r.NgForOf,o.f,r.NgIf,r.NgClass,p.b,p.d,y.a,p.g,p.j,f.a],pipes:[r.TitleCasePipe],styles:[".modal-body[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px;width:100px}"]}),e})(),data:{title:"Category"},pathMatch:"full"}];let k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=g["\u0275\u0275defineInjector"]({imports:[[i.i.forChild(M)],i.i]}),e})();var j=n("KtxW");let A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=g["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,k,j.a,p.c,s.h,o.g,c.b,a.b]]}),e})()}}]);